<div class="combate-container">
  <!-- üîπ Barra superior con informaci√≥n de ambos Pok√©mon -->
  <div class="info-superior">
    <div class="pokemon-info jugador">
      <h3>{{ pokemonJugador.nombre | titlecase }}</h3>
      <div class="hp-bar">
        <div class="hp" [style.width.%]="pokemonJugador.hp"></div>
      </div>
      <p>HP: {{ pokemonJugador.hp }}</p>
    </div>

    <div class="pokemon-info invitado">
      <h3>{{ pokemonInvitado.nombre | titlecase }}</h3>
      <div class="hp-bar">
        <div class="hp" [style.width.%]="pokemonInvitado.hp"></div>
      </div>
      <p>HP: {{ pokemonInvitado.hp }}</p>
    </div>
  </div>

  <!-- üîπ Escenario de combate -->
  <div class="escenario">
    <img
      class="sprite jugador"
      [src]="pokemonJugador.imagen"
      [alt]="pokemonJugador.nombre"
    />

    <img
      class="sprite invitado"
      [src]="pokemonInvitado.imagen"
      [alt]="pokemonInvitado.nombre"
    />
  </div>

  <!-- üîπ Panel inferior de interacci√≥n -->
  <div class="panel">
    <!-- üü¢ Men√∫ principal: solo visible cuando es tu turno -->
    <div class="menu-turno" *ngIf="turnoJugador && mostrandoMenu">
      <h3>¬øQu√© deseas hacer?</h3>
      <div class="botones-menu">
        <button (click)="elegirAtacar()">‚ö° Atacar</button>
        <button (click)="elegirCambiar()">üîÅ Cambiar Pok√©mon</button>
        <button (click)="escapar()">üö™ Escapar</button>
      </div>
    </div>

    <!-- üü£ Men√∫ de ataques -->
    <div class="menu-ataques" *ngIf="mostrandoAtaques">
      <h3>Elige un movimiento</h3>
      <div class="botones-ataques">
        <button
          *ngFor="let mov of movimientos"
          (click)="usarMovimiento(mov)"
        >
          {{ mov.nombre | titlecase }}
        </button>
      </div>
      <button class="volver" (click)="mostrarMenu()">‚¨Ö Volver</button>
    </div>

    <!-- üü° Men√∫ de cambio de Pok√©mon -->
    <div class="menu-cambio" *ngIf="mostrandoCambio">
      <h3>Selecciona tu nuevo Pok√©mon</h3>
      <div class="pokemones-cambio">
        <div
          class="pokemon-opcion"
          *ngFor="let p of equipoJugador"
          (click)="cambiarPokemon(p)"
          [class.activo]="p.nombre === pokemonJugador.nombre"
        >
          <img [src]="p.imagen" [alt]="p.nombre" />
          <p>{{ p.nombre | titlecase }}</p>
        </div>
      </div>
      <button class="volver" (click)="mostrarMenu()">‚¨Ö Volver</button>
    </div>

    <!-- üî¥ Si no es tu turno -->
    <div class="esperando" *ngIf="!turnoJugador">
      <p>‚è≥ Turno del rival...</p>
    </div>

    <!-- üîπ Equipos -->
    <div class="equipos">
      <div class="miniaturas jugador">
        <h4>Tu equipo</h4>
        <img
          *ngFor="let p of equipoJugador"
          [src]="p.imagen"
          [alt]="p.nombre"
          [class.activo]="p.nombre === pokemonJugador.nombre"
        />
      </div>

      <div class="miniaturas invitado" *ngIf="!turnoJugador">
        <h4>Equipo rival</h4>
        <img
          *ngFor="let p of equipoInvitado"
          [src]="p.imagen"
          [alt]="p.nombre"
          [class.activo]="p.nombre === pokemonInvitado.nombre"
        />
      </div>
    </div>
  </div>

  <!-- üîπ Mensaje central -->
  <div class="mensaje">
    <p>{{ mensaje }}</p>
  </div>
</div>
