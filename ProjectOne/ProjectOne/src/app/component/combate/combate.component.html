<div class="combate-container">
  <div *ngIf="mensaje" class="mensaje-superior">
    {{ mensaje }}
  </div>
  <div class="info-superior">
    <div class="pokemon-info jugador">
      <div class="nombre">{{ pokemonJugador?.nombre | titlecase }}</div>
      <div class="hp-bar">
        <div
          class="hp"
          [style.width]="(pokemonJugador?.hp || 0) + '%'"
          [ngClass]="{
            verde: (pokemonJugador?.hp || 0) > 50,
            amarillo: (pokemonJugador?.hp || 0) <= 50 && (pokemonJugador?.hp || 0) > 20,
            rojo: (pokemonJugador?.hp || 0) <= 40
          }"
        ></div>
      </div>
    </div>

    <div class="pokemon-info invitado">
      <div class="nombre">{{ pokemonInvitado?.nombre | titlecase }}</div>
      <div class="hp-bar">
        <div
          class="hp"
          [style.width]="(pokemonInvitado?.hp || 0) + '%'"
          [ngClass]="{
            verde: (pokemonInvitado?.hp || 0) > 50,
            amarillo: (pokemonInvitado?.hp || 0) <= 50 && (pokemonInvitado?.hp || 0) > 20,
            rojo: (pokemonInvitado?.hp || 0) <= 20
          }"
        ></div>
      </div>
    </div>
  </div>

  <!-- ðŸ”¹ Escenario principal -->
  <div class="escenario">
    <img
      class="sprite jugador"
      [src]="pokemonJugador?.imagen"
      [alt]="pokemonJugador?.nombre"
    />
    <img
      class="sprite invitado"
      [src]="pokemonInvitado?.imagen"
      [alt]="pokemonInvitado?.nombre"
    />
  </div>

  <!-- ðŸ”¹ Panel inferior (Jugador) -->
  <div class="panel jugador-panel">
    <!-- MenÃº principal -->
    <div class="menu-principal" *ngIf="mostrandoMenu">
      <div class="texto">Â¿QuÃ© deberÃ­a hacer {{ pokemonJugador?.nombre }}?</div>
      <div class="opciones">
        <button (click)="elegirAtacar()">ATACAR</button>
        <button (click)="elegirCambiar()">POKÃ‰MON</button>
        <button (click)="escapar()">CORRER</button>
      </div>
    </div>

    <!-- MenÃº de ataques -->
    <div class="ataques" *ngIf="mostrandoAtaques">
      <button *ngFor="let mov of movimientos" (click)="usarMovimiento(mov)">
        {{ mov.nombre }}
      </button>
    </div>

    <!-- MenÃº de cambio -->
    <div class="equipos" *ngIf="mostrandoCambio">
      <div class="miniaturas jugador">
        <ng-container *ngFor="let p of equipoJugador">
          <img
            *ngIf="p.vivo"
            [src]="p.imagen"
            [alt]="p.nombre"
            (click)="cambiarPokemon(p)"
            [class.activo]="p.nombre === pokemonJugador?.nombre"
          />
        </ng-container>
      </div>
    </div>


  <!-- ðŸ”¹ Panel del invitado -->
  <div
    class="panel invitado-panel"
    *ngIf="mostrandoMenuInvitado || mostrandoAtaquesInvitado || mostrandoCambioInvitado"
  >
    <!-- MenÃº principal -->
    <div class="menu-principal" *ngIf="mostrandoMenuInvitado">
      <div class="texto">Â¿QuÃ© deberÃ­a hacer {{ pokemonInvitado?.nombre }}?</div>
      <div class="opciones">
        <button (click)="elegirAtacarInvitado()">ATACAR</button>
        <button (click)="elegirCambiarInvitado()">POKÃ‰MON</button>
        <button (click)="escapar()">CORRER</button>
      </div>
    </div>

    <!-- MenÃº de ataques del invitado -->
    <div class="ataques" *ngIf="mostrandoAtaquesInvitado">
      <button
        *ngFor="let mov of movimientosInvitado"
        (click)="usarMovimientoInvitado(mov)"
      >
        {{ mov.nombre }}
      </button>
    </div>

    <!-- MenÃº de cambio del invitado -->
    <div class="equipos" *ngIf="mostrandoCambioInvitado">
      <div class="miniaturas invitado">
        <ng-container *ngFor="let p of equipoInvitado">
          <img
            *ngIf="p.vivo"
            [src]="p.imagen"
            [alt]="p.nombre"
            (click)="cambiarPokemonInvitado(p)"
            [class.activo]="p.nombre === pokemonInvitado?.nombre"
          />
        </ng-container>
      </div>
    </div>


</div>
  </div>
</div>
    <!-- âš ï¸ DiÃ¡logo de advertencia -->
    <p-dialog
      [(visible)]="dialogMensajeVisible"
      [modal]="true"
      [closable]="false"
      class="dialog-mensaje">
      <h3 class="dialog-mensaje-titulo">Â¡AtenciÃ³n!</h3>
      <p class="dialog-mensaje-texto">{{ mensajeDialogo }}</p>
      <div class="dialog-botones">
        <p-button label="OK" icon="pi pi-check" (onClick)="dialogMensajeVisible = false"></p-button>
      </div>
    </p-dialog>
